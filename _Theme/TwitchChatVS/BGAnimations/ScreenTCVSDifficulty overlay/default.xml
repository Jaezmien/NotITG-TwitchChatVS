<ActorFrame><children>
    <Aux
        InitCommand="%function(self)

            tcvs_difficulty_curr = 1


            GAMESTATE:SetExternal(0,0)
            
        end"
        OnCommand="queuecommand,Update"
        UpdateCommand="%function(self)
        
            if GAMESTATE:GetExternal(63)==0 then
                SCREENMAN:SystemMessage('Console Disconnected')
                SCREENMAN:SetNewScreen('ScreenLove')
            end

            self:cmd('sleep,0.02;queuecommand,Update')
        end"
    />
    <!-- -->
    <Layer
        Font="_misoreg"
        Text="Choose a difficulty!"
        InitCommand="xy,SCREEN_CENTER_X,SCREEN_CENTER_Y*0.2;shadowlength,2"
    />

    <Layer
        Font="_wendy white"
        Text="pee pee poo poo"
        InitCommand="xy,SCREEN_CENTER_X,SCREEN_CENTER_Y;zoom,0.5"
        OnCommand="queuecommand,Set"
        SetCommand="%function(self)
            local f = {'Beginner','Easy','Medium','Hard','Challenge'}
            --
            local st = f[ tcvs_song_difficulties[tcvs_difficulty_curr]:GetDifficulty() + 1 ]
            --
            self:settext(st ..' - '.. tcvs_song_difficulties[tcvs_difficulty_curr]:GetMeter())
            --
            GAMESTATE:ApplyGameCommand('Style,Versus')
            GAMESTATE:ApplyGameCommand('Steps,'..st)
            GAMESTATE:ApplyGameCommand('PlayMode,Regular')
        end"
        StepP1LeftPressMessageCommand="%function(self)
            if tcvs_difficulty_curr-1>0 then
                tcvs_difficulty_curr=tcvs_difficulty_curr-1
                --
                self:queuecommand('Set')
            end
        end"
        StepP1RightPressMessageCommand="%function(self)
            if tcvs_difficulty_curr+1<=table.getn(tcvs_song_difficulties) then
                tcvs_difficulty_curr=tcvs_difficulty_curr+1
                --
                self:queuecommand('Set')
            end
        end"
        StepP1UpPressMessageCommand="%function(self) GAMESTATE:ApplyGameCommand('screen,ScreenGameplay'); end"
    />
</children></ActorFrame>